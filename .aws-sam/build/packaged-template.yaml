AWSTemplateFormatVersion: '2010-09-09'
Description: 'AWS

  Sample SAM Template for AWS

  '
Globals:
  Function:
    Timeout: 20
Outputs:
  DemoLambdaFunction:
    Description: Demo Lambda Function ARN
    Value:
      Fn::GetAtt:
      - DemoLambdaFunction
      - Arn
  DemoLambdaFunctionExecRole:
    Description: Implicit IAM Role created for Demo function
    Value:
      Fn::GetAtt:
      - DemoLambdaFunctionExecRole
      - Arn
Resources:
  DemoDynamodbTable:
    Properties:
      AttributeDefinitions:
      - AttributeName: HashKey
        AttributeType: S
      - AttributeName: SortKey
        AttributeType: S
      BillingMode: PAY_PER_REQUEST
      KeySchema:
      - AttributeName: HashKey
        KeyType: HASH
      - AttributeName: SortKey
        KeyType: RANGE
      TableName: MyDemoTable
    Type: AWS::DynamoDB::Table
  DemoLambdaFunction:
    Properties:
      CodeUri: s3://dynamodb-0demo-s3/7f540c68d7948b1cffc263d318f964cb
      Environment:
        Variables:
          PARAM1: VALUE
      Handler: lambda.App::handleRequest
      MemorySize: 128
      Role:
        Fn::GetAtt:
        - DemoLambdaFunctionExecRole
        - Arn
      Runtime: java8
    Type: AWS::Serverless::Function
  DemoLambdaFunctionExecRole:
    Properties:
      AssumeRolePolicyDocument:
        Statement:
        - Action:
          - sts:AssumeRole
          Effect: Allow
          Principal:
            Service:
            - lambda.amazonaws.com
        Version: 2012-10-17
      Description: Exection role for lambda function.
      Policies:
      - PolicyDocument:
          Statement:
          - Action: '*'
            Effect: Allow
            Resource: '*'
          Version: 2012-10-17
        PolicyName: root
    Type: AWS::IAM::Role
Transform: AWS::Serverless-2016-10-31
